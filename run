#!/bin/bash -e

if [ -z "$TIMEOUT" ] ; then
    TIMEOUT=86400
fi

set +e

remove_images() {
  while true
  do
    echo "Sleeping..."
    sleep $TIMEOUT
    echo "Cleaning host..."
    docker rm $(docker ps -a -q)
    docker rmi $(docker images -q) 
  done
}

remove_images

wait
